<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Detalhes do Produto</title>
    <style>
        body {
            overflow-y: hidden; /* Evita a rolagem vertical */
            margin: 0; /* Remove margens padrão do corpo */
            padding: 0; /* Remove preenchimento padrão do corpo */
        }
        .bolinha {
            width: 10px;
            height: 10px;
            background-color: #EF2B00;
            border-radius: 50%;
            display: inline-block;
            margin: 0 5px;
            cursor: pointer;
        }
        .bolinha.ativa {
            background-color: black;
        }

        #total_container{
            display: flex;
            flex-direction: row;
            justify-content: center;
        }

        #info_container{
            display: flex;
            flex-direction: column;
            align-items: start;
            padding-right: 80px;


        }


        #imagem_container{
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;

        }
        #botaoAvanca{
            width: 80px;
            height: 80px;
            bottom: 170px;
            left: 150px;
            position:relative;
            background-image:url('https://i.pinimg.com/originals/95/3d/6c/953d6c0a8026ae79e81a689692428c6f.png');
            background-size: cover;
            background-repeat: no-repeat;
            border: none;
            cursor: pointer;
            display: inline-block;

        }
        #botaoVolta{
            width: 80px;
            height: 80px;
            bottom: 250px;
            right: 150px;
            position:relative;
            background-image: url('https://cdn-icons-png.freepik.com/512/6652/6652605.png');
            background-size: cover;
            background-repeat: no-repeat;
            border: none;
            cursor: pointer;
            display: inline-block;

        }
        #imagemAtual{
           max-width: 700px;
            max-height: 700px;"
        }

        #descri_product{
            font-family: "Segoe UI";

        }

        #title_product{
            font-size: 50px;
            font-family: "Segoe UI";
            font-weight: bold;
            display: flex;
            align-items: flex-end;
            margin: unset;
            margin-top: 100px

        }
        #avali_product{
            font-size: 35px;
            font-family: "Segoe UI";
            align-items: flex-end;
            margin: unset;
            text-align: center;

        }
        #price_product{
            display: flex;
            font-size: 40px;
            font-family: "Segoe UI";
            font-weight: 500;
            margin-left: 35px;
        }
        #indicadores{
            position: relative;
            display: flex;
            bottom: 200px;
        }

            .quadrado {
                width: 100px;
                height: 50px;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 44px;
                border: 3px solid black; /* Adiciona uma borda preta de 2px */
        }
        .sizes {
            width: 60px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 15px;
            border: 2px solid black;
            margin-right:  15px;
        }

    </style>
</head>
<body>
<h1>Detalhes do Produto</h1>

<div id="total_container">


        <div id="imagem_container" class="me-2 mb-2">
                <img id="imagemAtual" th:src="${'/imagens_produtos/' + imagens[0]}" class="img-thumbnail" >

            <div id="indicadores">
                <span th:each="imagem, index : ${imagens}" class="bolinha" onclick="mostrarImagem([[${index.index}]])"></span>
            </div>
            <button id="botaoAvanca" onclick="proximaImagem()"></button>
            <button id="botaoVolta" onclick="voltaImagem()"></button>
        </div>

    <div id="info_container">
        <h2 id="title_product" th:text="${produto.nome}"></h2>
        <p  id="avali_product"><img src="/images/stars.svg"/>
            <span th:text="${produto.avaliacao}"></span></p>
        <div style="display: flex; flex-direction: row; justify-content: start; align-items: center;">
            <div class="quadrado">
                + 1 -
            </div>
        <p  id="price_product">R$ <span th:text="${produto.preco}"></span></p>
        </div>
        <div style="display: flex; flex-direction: row;">
            <div class="sizes">36</div>
            <div class="sizes">37</div>
            <div class="sizes">38</div>
            <div class="sizes">39</div>
            <div class="sizes">40</div>
            <div class="sizes">41</div>
        </div>

        <div id="descri_product" style="width: 450px;">
            <p th:text="${produto.descricao}" style="word-wrap: break-word;"></p>
        </div>
        <div style="display: flex; flex-direction: row;">
            <button style="width: 190px; height: 50px; background-color: #EF2B00; color: #EDEDED; font-size: 13px; font-family: 'Segoe UI'; font-weight: bold; margin-right: 87px; border: none">COMPRAR</button>
            <button style="width: 190px; height: 50px; background-color: #000000; color: #EDEDED; font-size: 13px; font-family: 'Segoe UI'; font-weight: bold; border: none">ADICIONAR AO CARRINHO</button>
        </div>
</div >
</div>



<script th:inline="javascript">
    var imagens = /*[[${produto.imagens}]]*/;
    var imagemPadrao = /*[[${produto.imagemPadrao}]]*/;
    var indiceAtual = -1; // Inicializa o indice atual como -1

    function proximaImagem() {
        indiceAtual++;
        if (indiceAtual >= imagens.length) {
            indiceAtual = 0;
        }
        atualizarImagem();
    }

    function voltaImagem() {
        indiceAtual--;
        if (indiceAtual < 0) {
            indiceAtual = imagens.length - 1;
        }
        atualizarImagem();
    }

    function mostrarImagem(indice) {
        indiceAtual = indice;
        atualizarImagem();
    }

    function atualizarImagem() {
        if (imagens.length > 0) {
            if (indiceAtual === -1) {
                if (imagemPadrao && imagens.includes(imagemPadrao)) {
                    // Se houver uma imagem padrao e ela estiver na lista de imagens, mostra primeiro
                    indiceAtual = imagens.indexOf(imagemPadrao);
                } else {
                    // Caso contrario, exiba a primeira imagem da lista
                    indiceAtual = 0;
                }
            }
            document.getElementById('imagemAtual').src = '/imagens_produtos/' + imagens[indiceAtual];
            var bolinhas = document.querySelectorAll('.bolinha');
            for (var i = 0; i < bolinhas.length; i++) {
                bolinhas[i].classList.remove('ativa');
            }
            bolinhas[indiceAtual].classList.add('ativa');
        }
    }

    // exibir a primeira imagem quando a pagin carrega
    window.onload = function() {
        atualizarImagem();
    };
</script>



</body>
</html>
